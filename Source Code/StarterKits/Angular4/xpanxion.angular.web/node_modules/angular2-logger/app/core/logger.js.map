{"version":3,"file":"logger.js","sourceRoot":"","sources":["logger.ts"],"names":[],"mappings":"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","sourcesContent":["import {Injectable, Optional} from \"@angular/core\";\r\nimport {Level} from \"./level\";\r\n\r\n/**\r\n * Logger options.\r\n * See {@link Logger}.\r\n *\r\n * level - How much detail you want to see in the logs, 0 being off, 1 being the less detailed, 5 being the most. Defaults to WARN.\r\n * global - Whether you want the created logger object to be exposed in the global scope. Defaults to true.\r\n * globalAs - The window's property name that will hold the logger object created. Defaults to 'logger'.\r\n * store - Whether you want the level config to be saved in the local storage so it doesn't get lost when you refresh. Defaults to false.\r\n * storeAs - The local storage key that will be used to save the level config if the store setting is true. Defaults to 'angular2.logger.level'.\r\n *\r\n * Created by Langley on 3/23/2016.\r\n *\r\n */\r\nexport class Options {\r\n    level: Level;\r\n    global: boolean;\r\n    globalAs: string;\r\n    store: boolean;\r\n    storeAs: string;\r\n}\r\n\r\n// For browsers that don't implement the debug method, log will be used instead. Fixes #62.\r\nconst CONSOLE_DEBUG_METHOD = console[\"debug\"] ? \"debug\" : \"log\";\r\n\r\n// Temporal until https://github.com/angular/angular/issues/7344 gets fixed.\r\nconst DEFAULT_OPTIONS: Options = {\r\n    level: Level.WARN,\r\n    global: true,\r\n    globalAs: \"logger\",\r\n    store: false,\r\n    storeAs: \"angular2.logger.level\"\r\n};\r\n\r\n@Injectable()\r\nexport class Logger {\r\n\r\n    private _level: Level;\r\n    private _globalAs: string;\r\n    private _store: boolean;\r\n    private _storeAs: string;\r\n\r\n    public Level: any = Level;\r\n\r\n    constructor( @Optional() options?: Options ) {\r\n\r\n        // Move this to the constructor definition when optional parameters are working with @Injectable: https://github.com/angular/angular/issues/7344\r\n        let { level, global, globalAs, store, storeAs } = Object.assign( {}, DEFAULT_OPTIONS, options );\r\n\r\n        this._level = level;\r\n        this._globalAs = globalAs;\r\n        this._storeAs = storeAs;\r\n\r\n        global && this.global();\r\n\r\n        if ( store || this._loadLevel() ) this.store();\r\n\r\n    }\r\n\r\n    private _loadLevel = (): Level => Number(localStorage.getItem( this._storeAs ));\r\n\r\n    private _storeLevel(level: Level) { localStorage[ this._storeAs ] = level; }\r\n\r\n    error(message?: any, ...optionalParams: any[]) {\r\n        this.isErrorEnabled() && console.error.apply( console, arguments );\r\n    }\r\n\r\n    warn(message?: any, ...optionalParams: any[]) {\r\n        this.isWarnEnabled() && console.warn.apply( console, arguments );\r\n    }\r\n\r\n    info(message?: any, ...optionalParams: any[]) {\r\n        this.isInfoEnabled() && console.info.apply( console, arguments );\r\n    }\r\n\r\n    debug(message?: any, ...optionalParams: any[]) {\r\n        this.isDebugEnabled() && ( <any> console )[ CONSOLE_DEBUG_METHOD ].apply( console, arguments );\r\n    }\r\n\r\n    log(message?: any, ...optionalParams: any[]) {\r\n        this.isLogEnabled() && console.log.apply( console, arguments );\r\n    }\r\n\r\n    global = () => ( <any> window )[this._globalAs] = this;\r\n\r\n    store(): Logger {\r\n\r\n        this._store = true;\r\n        let storedLevel = this._loadLevel();\r\n        if ( storedLevel ) { this._level = storedLevel; }\r\n        else { this._storeLevel( this.level ); }\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    unstore(): Logger {\r\n        this._store = false;\r\n        localStorage.removeItem( this._storeAs );\r\n        return this;\r\n    }\r\n\r\n    isErrorEnabled = (): boolean => this.level >= Level.ERROR;\r\n    isWarnEnabled = (): boolean => this.level >= Level.WARN;\r\n    isInfoEnabled = (): boolean => this.level >= Level.INFO;\r\n    isDebugEnabled = (): boolean => this.level >= Level.DEBUG;\r\n    isLogEnabled = (): boolean => this.level >= Level.LOG;\r\n\r\n    get level(): Level { return this._level; }\r\n\r\n    set level(level: Level) {\r\n        this._store && this._storeLevel(level);\r\n        this._level = level;\r\n    }\r\n\r\n}\r\n"]}